var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
/**This class is automatically generated by LayaAirIDE, please do not make any modifications. */
const CreateQuestionMap_1 = require("./scripts/CreateQuestionMap");
const QuestionItem_1 = require("./scripts/QuestionItem");
/*
* 游戏初始化配置;
*/
class GameConfig {
    constructor() { }
    static init() {
        var reg = Laya.ClassUtils.regClass;
        reg("scripts/CreateQuestionMap.ts", CreateQuestionMap_1.default);
        reg("scripts/QuestionItem.ts", QuestionItem_1.default);
    }
}
GameConfig.width = 1920;
GameConfig.height = 1080;
GameConfig.scaleMode = "fixedwidth";
GameConfig.screenMode = "none";
GameConfig.alignV = "middle";
GameConfig.alignH = "center";
GameConfig.startScene = "SetQuestionWindow.scene";
GameConfig.sceneRoot = "";
GameConfig.debug = false;
GameConfig.stat = false;
GameConfig.physicsDebug = false;
GameConfig.exportSceneToJson = true;
exports.default = GameConfig;
GameConfig.init();
},{"./scripts/CreateQuestionMap":3,"./scripts/QuestionItem":4}],2:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const GameConfig_1 = require("./GameConfig");
class Main {
    constructor() {
        //根据IDE设置初始化引擎		
        if (window["Laya3D"])
            Laya3D.init(GameConfig_1.default.width, GameConfig_1.default.height);
        else
            Laya.init(GameConfig_1.default.width, GameConfig_1.default.height, Laya["WebGL"]);
        Laya["Physics"] && Laya["Physics"].enable();
        Laya["DebugPanel"] && Laya["DebugPanel"].enable();
        Laya.stage.scaleMode = GameConfig_1.default.scaleMode;
        Laya.stage.screenMode = GameConfig_1.default.screenMode;
        //兼容微信不支持加载scene后缀场景
        Laya.URL.exportSceneToJson = GameConfig_1.default.exportSceneToJson;
        //打开调试面板（通过IDE设置调试模式，或者url地址增加debug=true参数，均可打开调试面板）
        if (GameConfig_1.default.debug || Laya.Utils.getQueryString("debug") == "true")
            Laya.enableDebugPanel();
        if (GameConfig_1.default.physicsDebug && Laya["PhysicsDebugDraw"])
            Laya["PhysicsDebugDraw"].enable();
        if (GameConfig_1.default.stat)
            Laya.Stat.show();
        // Laya.alertGlobalError = true;
        //激活资源版本控制，version.json由IDE发布功能自动生成，如果没有也不影响后续流程
        Laya.ResourceVersion.enable("version.json", Laya.Handler.create(this, this.onVersionLoaded), Laya.ResourceVersion.FILENAME_VERSION);
    }
    onVersionLoaded() {
        //激活大小图映射，加载小图的时候，如果发现小图在大图合集里面，则优先加载大图合集，而不是小图
        Laya.AtlasInfoManager.enable("fileconfig.json", Laya.Handler.create(this, this.onConfigLoaded));
    }
    onConfigLoaded() {
        //加载IDE指定的场景
        GameConfig_1.default.startScene && Laya.Scene.open(GameConfig_1.default.startScene);
    }
}
//激活启动类
new Main();
},{"./GameConfig":1}],3:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const QuestionItem_1 = require("./QuestionItem");
class CreateQuestionMap extends Laya.Script {
    constructor() {
        super();
        /**按圈为key 保存每圈的方框组 */
        this.groupObject = {};
        /**当前步骤 */
        this.curStep = Step.One;
        /**鼠标是否按下 */
        this.isMouseDown = false;
        /**是否已完成出题 */
        this.isFinish = false;
        /**
         * @prop {name:questionItem,tips:预制体,type:Prefab,default:null}
         */
        this.questionItem = null;
        /**
         * @prop {name:nextBtn,tips:下一步按钮,type:Node,default:null}
         */
        this.nextBtn = null;
    }
    onAwake() {
        super.onAwake();
        Laya.stage.on(Laya.Event.MOUSE_UP, this, this.mouseUp, null);
        this.nextBtn.on(Laya.Event.CLICK, this, this.toNextStep, null);
        this.createMap(4);
    }
    /**创建面板底图 */
    createMap(circleCount) {
        let centerX = Laya.stage.width / 2 - 74 / 2;
        let centerY = Laya.stage.height / 2 - 64 / 2;
        //生成中心块
        this.addItemToGroup(this.createItem(centerX, centerY, 0), 0);
        //生成外圈块
        for (let i = 1; i <= circleCount; i++) {
            let sideCount = i + 1;
            // 先创建两边的块
            for (let j = 0; j < sideCount; j++) {
                let leftOffsetX = centerX - i * 55;
                let rightOffsetX = centerX + i * 55;
                let offsetY = centerY - 32 * i + j * 64;
                this.addItemToGroup(this.createItem(leftOffsetX, offsetY, i), i);
                this.addItemToGroup(this.createItem(rightOffsetX, offsetY, i), i);
            }
            //创建上面和下面的块
            let topItem = this.questionItem.create();
            let bottomItem = this.questionItem.create();
            this.addItemToGroup(this.createItem(centerX, centerY - 64 * i, i), i);
            this.addItemToGroup(this.createItem(centerX, centerY + 64 * i, i), i);
            // 左上，左下，右上，右下
            for (let j = 0; j < i - 1; j++) {
                // 左上
                let leftX = centerX - 55.5 * (i - 1 - j);
                let leftTopY = centerY - 32 * (i + 1 + j);
                this.addItemToGroup(this.createItem(leftX, leftTopY, i), i);
                // 左下
                let leftBomY = centerY + 32 * (i + 1 + j);
                this.addItemToGroup(this.createItem(leftX, leftBomY, i), i);
                // 右上
                let rightX = centerX + 55.5 * (i - 1 - j);
                let rightTopY = centerY - 32 * (i + 1 + j);
                this.addItemToGroup(this.createItem(rightX, rightTopY, i), i);
                // 右下
                let rightBomY = centerY + 32 * (i + 1 + j);
                this.addItemToGroup(this.createItem(rightX, rightBomY, i), i);
            }
        }
    }
    /**创建底图块 */
    createItem(x, y, groupIndex) {
        let item = this.questionItem.create();
        item.pos(x, y);
        this.owner.addChild(item);
        let constr = item.getComponent(QuestionItem_1.default); //获取实例上挂载的其他组件，也可以是脚本组件
        constr.groupIndex = groupIndex;
        constr.mouseDownHandle = Laya.Handler.create(this, this.mouseDown, null, false);
        constr.mouseOverHandle = Laya.Handler.create(this, this.mouseOver, null, false);
        return constr;
    }
    /**按圈为key 保存每圈的方框 */
    addItemToGroup(item, groupIndex) {
        if (!this.groupObject[groupIndex])
            this.groupObject[groupIndex] = new Array();
        this.groupObject[groupIndex].push(item);
    }
    /**鼠标点击方块
     * @param groupIndex
    */
    mouseDown(groupIndex, item) {
        if (this.isFinish)
            return;
        if (this.curStep == Step.One) {
            this.groupObject[groupIndex].forEach(item => item.setInverColor());
        }
        else if (this.curStep == Step.Two) {
            this.isMouseDown = true;
            item.setInverColor();
        }
    }
    /**
     * 鼠标移入方块
     * @param item 方块脚本实例
     */
    mouseOver(item) {
        if (this.isMouseDown && this.curStep == Step.Two) {
            if (item.isThrough) {
                this.isFinish = true;
                this.isMouseDown = false;
                console.log("不能走回头路");
                return;
            }
            item.setInverColor();
            item.isThrough = true;
        }
    }
    /**点击下一步 */
    toNextStep() {
        if (this.curStep == Step.One) {
            this.curStep = Step.Two;
        }
        else if (this.curStep == Step.Two) {
            this.curStep = Step.Three;
        }
    }
    /**鼠标抬起 */
    mouseUp() {
        this.isMouseDown = false;
        if (this.isMouseDown && this.curStep == Step.Two) {
            this.isFinish = true;
        }
    }
}
exports.default = CreateQuestionMap;
/**出题步骤 */
var Step;
(function (Step) {
    Step[Step["One"] = 1] = "One";
    Step[Step["Two"] = 2] = "Two";
    Step[Step["Three"] = 3] = "Three";
})(Step || (Step = {}));
},{"./QuestionItem":4}],4:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const Utils_1 = require("./Utils");
class QuestionItem extends Laya.Script {
    constructor() {
        super();
        /**当前方块所在圈 */
        this.groupIndex = -1;
        /**是否已经被移入过 */
        this.isThrough = false;
        this.isWhite = true;
    }
    onAwake() {
        super.onAwake();
        this.owner.on(Laya.Event.MOUSE_DOWN, this, this.clickItem, null);
        this.owner.on(Laya.Event.MOUSE_OVER, this, this.overItem, null);
    }
    /**鼠标点击事件处理 */
    clickItem() {
        if (this.mouseDownHandle) {
            this.mouseDownHandle.runWith([this.groupIndex, this]);
        }
    }
    /**鼠标移入事件处理  */
    overItem() {
        if (this.mouseOverHandle) {
            this.mouseOverHandle.runWith([this]);
        }
    }
    /**设置反色 */
    setInverColor() {
        this.isWhite = !this.isWhite;
        let item = this.owner;
        item.skin = this.isWhite ? Utils_1.default.getCompSkin("white") : Utils_1.default.getCompSkin("black");
    }
}
exports.default = QuestionItem;
},{"./Utils":5}],5:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
class Utils {
    /**获取公共资源图片路径 */
    static getCompSkin(name) {
        return "ui/" + name + ".png";
    }
}
exports.default = Utils;
},{}]},{},[2])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6L2xheWEvTGF5YUFpcklERV9iZXRhL3Jlc291cmNlcy9hcHAvbm9kZV9tb2R1bGVzL2Jyb3dzZXItcGFjay9fcHJlbHVkZS5qcyIsInNyYy9HYW1lQ29uZmlnLnRzIiwic3JjL01haW4udHMiLCJzcmMvc2NyaXB0cy9DcmVhdGVRdWVzdGlvbk1hcC50cyIsInNyYy9zY3JpcHRzL1F1ZXN0aW9uSXRlbS50cyIsInNyYy9zY3JpcHRzL1V0aWxzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ1ZBLGdHQUFnRztBQUNoRyxtRUFBMkQ7QUFDM0QseURBQWlEO0FBQ2pEOztFQUVFO0FBQ0Y7SUFhSSxnQkFBYyxDQUFDO0lBQ2YsTUFBTSxDQUFDLElBQUk7UUFDUCxJQUFJLEdBQUcsR0FBYSxJQUFJLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQztRQUM3QyxHQUFHLENBQUMsOEJBQThCLEVBQUMsMkJBQWlCLENBQUMsQ0FBQztRQUN0RCxHQUFHLENBQUMseUJBQXlCLEVBQUMsc0JBQVksQ0FBQyxDQUFDO0lBQ2hELENBQUM7O0FBakJNLGdCQUFLLEdBQVEsSUFBSSxDQUFDO0FBQ2xCLGlCQUFNLEdBQVEsSUFBSSxDQUFDO0FBQ25CLG9CQUFTLEdBQVEsWUFBWSxDQUFDO0FBQzlCLHFCQUFVLEdBQVEsTUFBTSxDQUFDO0FBQ3pCLGlCQUFNLEdBQVEsUUFBUSxDQUFDO0FBQ3ZCLGlCQUFNLEdBQVEsUUFBUSxDQUFDO0FBQ3ZCLHFCQUFVLEdBQUsseUJBQXlCLENBQUM7QUFDekMsb0JBQVMsR0FBUSxFQUFFLENBQUM7QUFDcEIsZ0JBQUssR0FBUyxLQUFLLENBQUM7QUFDcEIsZUFBSSxHQUFTLEtBQUssQ0FBQztBQUNuQix1QkFBWSxHQUFTLEtBQUssQ0FBQztBQUMzQiw0QkFBaUIsR0FBUyxJQUFJLENBQUM7QUFaMUMsNkJBbUJDO0FBQ0QsVUFBVSxDQUFD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S0FBbUIsQ0FBQztRQUNwQyxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLGVBQUssQ0FBQyxXQUFXLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLGVBQUssQ0FBQyxXQUFXLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDdkYsQ0FBQztDQUNKO0FBeENELCtCQXdDQzs7OztBQzFDRDtJQUNJLGdCQUFnQjtJQUNULE1BQU0sQ0FBQyxXQUFXLENBQUMsSUFBVztRQUNqQyxPQUFPLEtBQUssR0FBRyxJQUFJLEdBQUcsTUFBTSxDQUFDO0lBQ2pDLENBQUM7Q0FDSjtBQUxELHdCQUtDIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG4gICAgfTtcclxufSkoKTtcclxuKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsIi8qKlRoaXMgY2xhc3MgaXMgYXV0b21hdGljYWxseSBnZW5lcmF0ZWQgYnkgTGF5YUFpcklERSwgcGxlYXNlIGRvIG5vdCBtYWtlIGFueSBtb2RpZmljYXRpb25zLiAqL1xyXG5pbXBvcnQgQ3JlYXRlUXVlc3Rpb25NYXAgZnJvbSBcIi4vc2NyaXB0cy9DcmVhdGVRdWVzdGlvbk1hcFwiXG5pbXBvcnQgUXVlc3Rpb25JdGVtIGZyb20gXCIuL3NjcmlwdHMvUXVlc3Rpb25JdGVtXCJcclxuLypcclxuKiDmuLjmiI/liJ3lp4vljJbphY3nva47XHJcbiovXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdhbWVDb25maWd7XHJcbiAgICBzdGF0aWMgd2lkdGg6bnVtYmVyPTE5MjA7XHJcbiAgICBzdGF0aWMgaGVpZ2h0Om51bWJlcj0xMDgwO1xyXG4gICAgc3RhdGljIHNjYWxlTW9kZTpzdHJpbmc9XCJmaXhlZHdpZHRoXCI7XHJcbiAgICBzdGF0aWMgc2NyZWVuTW9kZTpzdHJpbmc9XCJub25lXCI7XHJcbiAgICBzdGF0aWMgYWxpZ25WOnN0cmluZz1cIm1pZGRsZVwiO1xyXG4gICAgc3RhdGljIGFsaWduSDpzdHJpbmc9XCJjZW50ZXJcIjtcclxuICAgIHN0YXRpYyBzdGFydFNjZW5lOmFueT1cIlNldFF1ZXN0aW9uV2luZG93LnNjZW5lXCI7XHJcbiAgICBzdGF0aWMgc2NlbmVSb290OnN0cmluZz1cIlwiO1xyXG4gICAgc3RhdGljIGRlYnVnOmJvb2xlYW49ZmFsc2U7XHJcbiAgICBzdGF0aWMgc3RhdDpib29sZWFuPWZhbHNlO1xyXG4gICAgc3RhdGljIHBoeXNpY3NEZWJ1Zzpib29sZWFuPWZhbHNlO1xyXG4gICAgc3RhdGljIGV4cG9ydFNjZW5lVG9Kc29uOmJvb2xlYW49dHJ1ZTtcclxuICAgIGNvbnN0cnVjdG9yKCl7fVxyXG4gICAgc3RhdGljIGluaXQoKXtcclxuICAgICAgICB2YXIgcmVnOiBGdW5jdGlvbiA9IExheWEuQ2xhc3NVdGlscy5yZWdDbGFzcztcclxuICAgICAgICByZWcoXCJzY3JpcHRzL0NyZWF0ZVF1ZXN0aW9uTWFwLnRzXCIsQ3JlYXRlUXVlc3Rpb25NYXApO1xuICAgICAgICByZWcoXCJzY3JpcHRzL1F1ZXN0aW9uSXRlbS50c1wiLFF1ZXN0aW9uSXRlbSk7XHJcbiAgICB9XHJcbn1cclxuR2FtZUNvbmZpZy5pbml0KCk7IiwiaW1wb3J0IEdhbWVDb25maWcgZnJvbSBcIi4vR2FtZUNvbmZpZ1wiO1xyXG5jbGFzcyBNYWluIHtcclxuXHRjb25zdHJ1Y3RvcigpIHtcclxuXHRcdC8v5qC55o2uSURF6K6+572u5Yid5aeL5YyW5byV5pOOXHRcdFxyXG5cdFx0aWYgKHdpbmRvd1tcIkxheWEzRFwiXSkgTGF5YTNELmluaXQoR2FtZUNvbmZpZy53aWR0aCwgR2FtZUNvbmZpZy5oZWlnaHQpO1xyXG5cdFx0ZWxzZSBMYXlhLmluaXQoR2FtZUNvbmZpZy53aWR0aCwgR2FtZUNvbmZpZy5oZWlnaHQsIExheWFbXCJXZWJHTFwiXSk7XHJcblx0XHRMYXlhW1wiUGh5c2ljc1wiXSAmJiBMYXlhW1wiUGh5c2ljc1wiXS5lbmFibGUoKTtcclxuXHRcdExheWFbXCJEZWJ1Z1BhbmVsXCJdICYmIExheWFbXCJEZWJ1Z1BhbmVsXCJdLmVuYWJsZSgpO1xyXG5cdFx0TGF5YS5zdGFnZS5zY2FsZU1vZGUgPSBHYW1lQ29uZmlnLnNjYWxlTW9kZTtcclxuXHRcdExheWEuc3RhZ2Uuc2NyZWVuTW9kZSA9IEdhbWVDb25maWcuc2NyZWVuTW9kZTtcclxuXHRcdC8v5YW85a655b6u5L+h5LiN5pSv5oyB5Yqg6L29c2NlbmXlkI7nvIDlnLrmma9cclxuXHRcdExheWEuVVJMLmV4cG9ydFNjZW5lVG9Kc29uID0gR2FtZUNvbmZpZy5leHBvcnRTY2VuZVRvSnNvbjtcclxuXHJcblx0XHQvL+aJk+W8gOiwg+ivlemdouadv++8iOmAmui/h0lEReiuvue9ruiwg+ivleaooeW8j++8jOaIluiAhXVybOWcsOWdgOWinuWKoGRlYnVnPXRydWXlj4LmlbDvvIzlnYflj6/miZPlvIDosIPor5XpnaLmnb/vvIlcclxuXHRcdGlmIChHYW1lQ29uZmlnLmRlYnVnIHx8IExheWEuVXRpbHMuZ2V0UXVlcnlTdHJpbmcoXCJkZWJ1Z1wiKSA9PSBcInRydWVcIikgTGF5YS5lbmFibGVEZWJ1Z1BhbmVsKCk7XHJcblx0XHRpZiAoR2FtZUNvbmZpZy5waHlzaWNzRGVidWcgJiYgTGF5YVtcIlBoeXNpY3NEZWJ1Z0RyYXdcIl0pIExheWFbXCJQaHlzaWNzRGVidWdEcmF3XCJdLmVuYWJsZSgpO1xyXG5cdFx0aWYgKEdhbWVDb25maWcuc3RhdCkgTGF5YS5TdGF0LnNob3coKTtcclxuXHRcdC8vIExheWEuYWxlcnRHbG9iYWxFcnJvciA9IHRydWU7XHJcblxyXG5cdFx0Ly/mv4DmtLvotYTmupDniYjmnKzmjqfliLbvvIx2ZXJzaW9uLmpzb27nlLFJREXlj5HluIPlip/og73oh6rliqjnlJ/miJDvvIzlpoLmnpzmsqHmnInkuZ/kuI3lvbHlk43lkI7nu63mtYHnqItcclxuXHRcdExheWEuUmVzb3VyY2VWZXJzaW9uLmVuYWJsZShcInZlcnNpb24uanNvblwiLCBMYXlhLkhhbmRsZXIuY3JlYXRlKHRoaXMsIHRoaXMub25WZXJzaW9uTG9hZGVkKSwgTGF5YS5SZXNvdXJjZVZlcnNpb24uRklMRU5BTUVfVkVSU0lPTik7XHJcblx0fVxyXG5cclxuXHRvblZlcnNpb25Mb2FkZWQoKTogdm9pZCB7XHJcblx0XHQvL+a/gOa0u+Wkp+Wwj+WbvuaYoOWwhO+8jOWKoOi9veWwj+WbvueahOaXtuWAme+8jOWmguaenOWPkeeOsOWwj+WbvuWcqOWkp+WbvuWQiOmbhumHjOmdou+8jOWImeS8mOWFiOWKoOi9veWkp+WbvuWQiOmbhu+8jOiAjOS4jeaYr+Wwj+WbvlxyXG5cdFx0TGF5YS5BdGxhc0luZm9NYW5hZ2VyLmVuYWJsZShcImZpbGVjb25maWcuanNvblwiLCBMYXlhLkhhbmRsZXIuY3JlYXRlKHRoaXMsIHRoaXMub25Db25maWdMb2FkZWQpKTtcclxuXHR9XHJcblxyXG5cdG9uQ29uZmlnTG9hZGVkKCk6IHZvaWQge1xyXG5cdFx0Ly/liqDovb1JREXmjIflrprnmoTlnLrmma9cclxuXHRcdEdhbWVDb25maWcuc3RhcnRTY2VuZSAmJiBMYXlhLlNjZW5lLm9wZW4oR2FtZUNvbmZpZy5zdGFydFNjZW5lKTtcclxuXHR9XHJcbn1cclxuLy/mv4DmtLvlkK/liqjnsbtcclxubmV3IE1haW4oKTtcclxuIiwiaW1wb3J0IFF1ZXN0aW9uSXRlbSBmcm9tIFwiLi9RdWVzdGlvbkl0ZW1cIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENyZWF0ZVF1ZXN0aW9uTWFwIGV4dGVuZHMgTGF5YS5TY3JpcHR7XHJcbiAgIFxyXG4gICAgcHJpdmF0ZSBxdWVzdGlvbkl0ZW06TGF5YS5QcmVmYWI7XHJcbiAgICBwcml2YXRlIG5leHRCdG46TGF5YS5CdXR0b247XHJcblxyXG4gICAgLyoq5oyJ5ZyI5Li6a2V5IOS/neWtmOavj+WciOeahOaWueahhue7hCAqL1xyXG4gICAgcHJpdmF0ZSBncm91cE9iamVjdDp7W2NpcmNsZTpzdHJpbmddOlF1ZXN0aW9uSXRlbVtdfSA9IHt9O1xyXG4gICAgLyoq5b2T5YmN5q2l6aqkICovXHJcbiAgICBwcml2YXRlIGN1clN0ZXA6U3RlcCA9IFN0ZXAuT25lO1xyXG4gICAgLyoq6byg5qCH5piv5ZCm5oyJ5LiLICovXHJcbiAgICBwcml2YXRlIGlzTW91c2VEb3duOmJvb2xlYW4gPSBmYWxzZTtcclxuICAgIC8qKuaYr+WQpuW3suWujOaIkOWHuumimCAqL1xyXG4gICAgcHJpdmF0ZSBpc0ZpbmlzaDpib29sZWFuID0gZmFsc2U7XHJcbiAgIFxyXG4gICAgY29uc3RydWN0b3IoKXtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBwcm9wIHtuYW1lOnF1ZXN0aW9uSXRlbSx0aXBzOumihOWItuS9kyx0eXBlOlByZWZhYixkZWZhdWx0Om51bGx9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5xdWVzdGlvbkl0ZW0gPSBudWxsO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBwcm9wIHtuYW1lOm5leHRCdG4sdGlwczrkuIvkuIDmraXmjInpkq4sdHlwZTpOb2RlLGRlZmF1bHQ6bnVsbH1cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLm5leHRCdG4gPSBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIG9uQXdha2UoKXtcclxuICAgICAgICBzdXBlci5vbkF3YWtlKCk7XHJcbiAgICAgICAgTGF5YS5zdGFnZS5vbihMYXlhLkV2ZW50Lk1PVVNFX1VQLHRoaXMsdGhpcy5tb3VzZVVwLG51bGwpO1xyXG4gICAgICAgIHRoaXMubmV4dEJ0bi5vbihMYXlhLkV2ZW50LkNMSUNLLHRoaXMsdGhpcy50b05leHRTdGVwLG51bGwpO1xyXG4gICAgICAgIHRoaXMuY3JlYXRlTWFwKDQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKuWIm+W7uumdouadv+W6leWbviAqL1xyXG4gICAgcHJpdmF0ZSBjcmVhdGVNYXAoY2lyY2xlQ291bnQ6bnVtYmVyKSB7XHJcbiAgICAgICAgbGV0IGNlbnRlclggPSBMYXlhLnN0YWdlLndpZHRoIC8gMiAtIDc0IC8gMjtcclxuICAgICAgICBsZXQgY2VudGVyWSA9IExheWEuc3RhZ2UuaGVpZ2h0IC8gMiAtIDY0IC8gMjtcclxuICAgICAgICAvL+eUn+aIkOS4reW/g+Wdl1xyXG4gICAgICAgIHRoaXMuYWRkSXRlbVRvR3JvdXAodGhpcy5jcmVhdGVJdGVtKGNlbnRlclgsY2VudGVyWSwwKSwwKTtcclxuICAgICAgICAvL+eUn+aIkOWkluWciOWdl1xyXG4gICAgICAgIGZvcihsZXQgaSA9IDE7aSA8PSBjaXJjbGVDb3VudDtpKyspe1xyXG4gICAgICAgICAgICBsZXQgc2lkZUNvdW50ID0gaSArIDE7XHJcbiAgICAgICAgICAgIC8vIOWFiOWIm+W7uuS4pOi+ueeahOWdl1xyXG4gICAgICAgICAgICBmb3IobGV0IGogPSAwO2ogPCBzaWRlQ291bnQ7aisrKXtcclxuICAgICAgICAgICAgICAgIGxldCBsZWZ0T2Zmc2V0WCA9IGNlbnRlclggLSBpICogNTU7XHJcbiAgICAgICAgICAgICAgICBsZXQgcmlnaHRPZmZzZXRYID0gY2VudGVyWCArIGkgKiA1NTtcclxuICAgICAgICAgICAgICAgIGxldCBvZmZzZXRZID0gY2VudGVyWSAtIDMyICogaSArIGogKiA2NDtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWRkSXRlbVRvR3JvdXAodGhpcy5jcmVhdGVJdGVtKGxlZnRPZmZzZXRYLG9mZnNldFksaSksaSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFkZEl0ZW1Ub0dyb3VwKHRoaXMuY3JlYXRlSXRlbShyaWdodE9mZnNldFgsb2Zmc2V0WSxpKSxpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvL+WIm+W7uuS4iumdouWSjOS4i+mdoueahOWdl1xyXG4gICAgICAgICAgICBsZXQgdG9wSXRlbSA9IHRoaXMucXVlc3Rpb25JdGVtLmNyZWF0ZSgpO1xyXG4gICAgICAgICAgICBsZXQgYm90dG9tSXRlbSA9IHRoaXMucXVlc3Rpb25JdGVtLmNyZWF0ZSgpO1xyXG4gICAgICAgICAgICB0aGlzLmFkZEl0ZW1Ub0dyb3VwKHRoaXMuY3JlYXRlSXRlbShjZW50ZXJYLGNlbnRlclkgLSA2NCAqIGksaSksaSk7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkSXRlbVRvR3JvdXAodGhpcy5jcmVhdGVJdGVtKGNlbnRlclgsY2VudGVyWSArIDY0ICogaSxpKSxpKTtcclxuICAgICAgICAgICAgLy8g5bem5LiK77yM5bem5LiL77yM5Y+z5LiK77yM5Y+z5LiLXHJcbiAgICAgICAgICAgIGZvcihsZXQgaiA9IDA7aiA8IGkgLSAxOyBqKyspe1xyXG4gICAgICAgICAgICAgICAgLy8g5bem5LiKXHJcbiAgICAgICAgICAgICAgICBsZXQgbGVmdFggPSBjZW50ZXJYIC0gNTUuNSAqIChpIC0gMSAtIGopO1xyXG4gICAgICAgICAgICAgICAgbGV0IGxlZnRUb3BZID0gY2VudGVyWSAtIDMyICogKGkgKyAxICsgaik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFkZEl0ZW1Ub0dyb3VwKHRoaXMuY3JlYXRlSXRlbShsZWZ0WCxsZWZ0VG9wWSxpKSxpKTtcclxuICAgICAgICAgICAgICAgIC8vIOW3puS4i1xyXG4gICAgICAgICAgICAgICAgbGV0IGxlZnRCb21ZID0gY2VudGVyWSArIDMyICogKGkgKyAxICsgaik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFkZEl0ZW1Ub0dyb3VwKHRoaXMuY3JlYXRlSXRlbShsZWZ0WCxsZWZ0Qm9tWSxpKSxpKTtcclxuICAgICAgICAgICAgICAgIC8vIOWPs+S4ilxyXG4gICAgICAgICAgICAgICAgbGV0IHJpZ2h0WCA9IGNlbnRlclggKyA1NS41ICogKGkgLSAxIC0gaik7XHJcbiAgICAgICAgICAgICAgICBsZXQgcmlnaHRUb3BZID0gY2VudGVyWSAtIDMyICogKGkgKyAxICsgaik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFkZEl0ZW1Ub0dyb3VwKHRoaXMuY3JlYXRlSXRlbShyaWdodFgscmlnaHRUb3BZLGkpLGkpO1xyXG4gICAgICAgICAgICAgICAgLy8g5Y+z5LiLXHJcbiAgICAgICAgICAgICAgICBsZXQgcmlnaHRCb21ZID0gY2VudGVyWSArIDMyICogKGkgKyAxICsgaik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFkZEl0ZW1Ub0dyb3VwKHRoaXMuY3JlYXRlSXRlbShyaWdodFgscmlnaHRCb21ZLGkpLGkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKuWIm+W7uuW6leWbvuWdlyAqL1xyXG4gICAgcHJpdmF0ZSBjcmVhdGVJdGVtKHg6bnVtYmVyLHk6bnVtYmVyLGdyb3VwSW5kZXg6bnVtYmVyKTpRdWVzdGlvbkl0ZW0ge1xyXG4gICAgICAgIGxldCBpdGVtID0gdGhpcy5xdWVzdGlvbkl0ZW0uY3JlYXRlKCkgYXMgTGF5YS5JbWFnZTtcclxuICAgICAgICBpdGVtLnBvcyh4LHkpO1xyXG4gICAgICAgIHRoaXMub3duZXIuYWRkQ2hpbGQoaXRlbSk7XHJcbiAgICAgICAgbGV0IGNvbnN0ciA9IGl0ZW0uZ2V0Q29tcG9uZW50KFF1ZXN0aW9uSXRlbSkgYXMgUXVlc3Rpb25JdGVtOy8v6I635Y+W5a6e5L6L5LiK5oyC6L2955qE5YW25LuW57uE5Lu277yM5Lmf5Y+v5Lul5piv6ISa5pys57uE5Lu2XHJcbiAgICAgICAgY29uc3RyLmdyb3VwSW5kZXggPSBncm91cEluZGV4O1xyXG4gICAgICAgIGNvbnN0ci5tb3VzZURvd25IYW5kbGUgPSBMYXlhLkhhbmRsZXIuY3JlYXRlKHRoaXMsdGhpcy5tb3VzZURvd24sbnVsbCxmYWxzZSk7XHJcbiAgICAgICAgY29uc3RyLm1vdXNlT3ZlckhhbmRsZSA9IExheWEuSGFuZGxlci5jcmVhdGUodGhpcyx0aGlzLm1vdXNlT3ZlcixudWxsLGZhbHNlKTtcclxuICAgICAgICByZXR1cm4gY29uc3RyO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKuaMieWciOS4umtleSDkv53lrZjmr4/lnIjnmoTmlrnmoYYgKi9cclxuICAgIHByaXZhdGUgYWRkSXRlbVRvR3JvdXAoaXRlbTpRdWVzdGlvbkl0ZW0sZ3JvdXBJbmRleDpudW1iZXIpOnZvaWR7XHJcbiAgICAgICAgaWYoIXRoaXMuZ3JvdXBPYmplY3RbZ3JvdXBJbmRleF0pIHRoaXMuZ3JvdXBPYmplY3RbZ3JvdXBJbmRleF0gPSBuZXcgQXJyYXkoKTtcclxuICAgICAgICB0aGlzLmdyb3VwT2JqZWN0W2dyb3VwSW5kZXhdLnB1c2goaXRlbSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoq6byg5qCH54K55Ye75pa55Z2XIFxyXG4gICAgICogQHBhcmFtIGdyb3VwSW5kZXhcclxuICAgICovXHJcbiAgICBwcml2YXRlIG1vdXNlRG93bihncm91cEluZGV4Om51bWJlcixpdGVtOlF1ZXN0aW9uSXRlbSk6dm9pZHtcclxuICAgICAgICBpZih0aGlzLmlzRmluaXNoKSByZXR1cm47XHJcbiAgICAgICAgaWYodGhpcy5jdXJTdGVwID09IFN0ZXAuT25lKXtcclxuICAgICAgICAgICAgdGhpcy5ncm91cE9iamVjdFtncm91cEluZGV4XS5mb3JFYWNoKGl0ZW09Pml0ZW0uc2V0SW52ZXJDb2xvcigpKTtcclxuICAgICAgICB9ZWxzZSBpZih0aGlzLmN1clN0ZXAgPT0gU3RlcC5Ud28pe1xyXG4gICAgICAgICAgICB0aGlzLmlzTW91c2VEb3duID0gdHJ1ZTtcclxuICAgICAgICAgICAgaXRlbS5zZXRJbnZlckNvbG9yKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6byg5qCH56e75YWl5pa55Z2XIFxyXG4gICAgICogQHBhcmFtIGl0ZW0g5pa55Z2X6ISa5pys5a6e5L6LXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgbW91c2VPdmVyKGl0ZW06UXVlc3Rpb25JdGVtKTp2b2lke1xyXG4gICAgICAgIGlmKHRoaXMuaXNNb3VzZURvd24gJiYgdGhpcy5jdXJTdGVwID09IFN0ZXAuVHdvKXtcclxuICAgICAgICAgICAgaWYoaXRlbS5pc1Rocm91Z2gpe1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pc0ZpbmlzaCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmlzTW91c2VEb3duID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIuS4jeiDvei1sOWbnuWktOi3r1wiKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpdGVtLnNldEludmVyQ29sb3IoKTtcclxuICAgICAgICAgICAgaXRlbS5pc1Rocm91Z2ggPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKirngrnlh7vkuIvkuIDmraUgKi9cclxuICAgIHByaXZhdGUgdG9OZXh0U3RlcCgpOnZvaWR7XHJcbiAgICAgICAgaWYodGhpcy5jdXJTdGVwID09IFN0ZXAuT25lKXtcclxuICAgICAgICAgICAgdGhpcy5jdXJTdGVwID0gU3RlcC5Ud287XHJcbiAgICAgICAgfWVsc2UgaWYodGhpcy5jdXJTdGVwID09IFN0ZXAuVHdvKXtcclxuICAgICAgICAgICAgdGhpcy5jdXJTdGVwID0gU3RlcC5UaHJlZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoq6byg5qCH5oqs6LW3ICovXHJcbiAgICBwcml2YXRlIG1vdXNlVXAoKTp2b2lke1xyXG4gICAgICAgIHRoaXMuaXNNb3VzZURvd24gPSBmYWxzZTtcclxuICAgICAgICBpZih0aGlzLmlzTW91c2VEb3duICYmIHRoaXMuY3VyU3RlcCA9PSBTdGVwLlR3byl7XHJcbiAgICAgICAgICAgIHRoaXMuaXNGaW5pc2ggPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuLyoq5Ye66aKY5q2l6aqkICovXHJcbmVudW0gU3RlcHtcclxuICAgIE9uZSA9IDEsXHJcbiAgICBUd28sXHJcbiAgICBUaHJlZVxyXG59IiwiaW1wb3J0IFV0aWxzIGZyb20gXCIuL1V0aWxzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBRdWVzdGlvbkl0ZW0gZXh0ZW5kcyBMYXlhLlNjcmlwdCB7XHJcbiAgICBcclxuICAgIC8qKuW9k+WJjeaWueWdl+aJgOWcqOWciCAqL1xyXG4gICAgcHVibGljIGdyb3VwSW5kZXg6bnVtYmVyID0gLTE7XHJcbiAgICAvKirlvZPliY3mlrnlnZfpvKDmoIfmjInkuIvlpITnkIYgKi9cclxuICAgIHB1YmxpYyBtb3VzZURvd25IYW5kbGU6TGF5YS5IYW5kbGVyO1xyXG4gICAgLyoq5b2T5YmN5pa55Z2X6byg5qCH56e75YWl5aSE55CGICovXHJcbiAgICBwdWJsaWMgbW91c2VPdmVySGFuZGxlOkxheWEuSGFuZGxlcjtcclxuICAgIC8qKuaYr+WQpuW3sue7j+iiq+enu+WFpei/hyAqL1xyXG4gICAgcHVibGljIGlzVGhyb3VnaDpib29sZWFuID0gZmFsc2U7XHJcblxyXG4gICAgcHJpdmF0ZSBpc1doaXRlOmJvb2xlYW4gPSB0cnVlO1xyXG4gICAgY29uc3RydWN0b3IoKSB7IHN1cGVyKCk7IH1cclxuICAgIFxyXG4gICAgb25Bd2FrZSgpe1xyXG4gICAgICAgIHN1cGVyLm9uQXdha2UoKTtcclxuICAgICAgICB0aGlzLm93bmVyLm9uKExheWEuRXZlbnQuTU9VU0VfRE9XTix0aGlzLHRoaXMuY2xpY2tJdGVtLG51bGwpO1xyXG4gICAgICAgIHRoaXMub3duZXIub24oTGF5YS5FdmVudC5NT1VTRV9PVkVSLHRoaXMsdGhpcy5vdmVySXRlbSxudWxsKTtcclxuICAgIH1cclxuXHJcbiAgICAvKirpvKDmoIfngrnlh7vkuovku7blpITnkIYgKi9cclxuICAgIHByaXZhdGUgY2xpY2tJdGVtKCk6dm9pZHtcclxuICAgICAgICBpZih0aGlzLm1vdXNlRG93bkhhbmRsZSl7XHJcbiAgICAgICAgICAgIHRoaXMubW91c2VEb3duSGFuZGxlLnJ1bldpdGgoW3RoaXMuZ3JvdXBJbmRleCx0aGlzXSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKum8oOagh+enu+WFpeS6i+S7tuWkhOeQhiAgKi9cclxuICAgIHByaXZhdGUgb3Zlckl0ZW0oKTp2b2lke1xyXG4gICAgICAgIGlmKHRoaXMubW91c2VPdmVySGFuZGxlKXtcclxuICAgICAgICAgICAgdGhpcy5tb3VzZU92ZXJIYW5kbGUucnVuV2l0aChbdGhpc10pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKirorr7nva7lj43oibIgKi9cclxuICAgIHB1YmxpYyBzZXRJbnZlckNvbG9yKCk6dm9pZHtcclxuICAgICAgICB0aGlzLmlzV2hpdGUgPSAhdGhpcy5pc1doaXRlO1xyXG4gICAgICAgIGxldCBpdGVtID0gdGhpcy5vd25lciBhcyBMYXlhLkltYWdlO1xyXG4gICAgICAgIGl0ZW0uc2tpbiA9IHRoaXMuaXNXaGl0ZSA/IFV0aWxzLmdldENvbXBTa2luKFwid2hpdGVcIikgOiBVdGlscy5nZXRDb21wU2tpbihcImJsYWNrXCIpO1xyXG4gICAgfVxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXRpbHN7XHJcbiAgICAvKirojrflj5blhazlhbHotYTmupDlm77niYfot6/lvoQgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0Q29tcFNraW4obmFtZTpzdHJpbmcpOnN0cmluZ3tcclxuICAgICAgICByZXR1cm4gXCJ1aS9cIiArIG5hbWUgKyBcIi5wbmdcIjtcclxuICAgIH1cclxufSJdfQ==
